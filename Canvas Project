<!doctype html>
<html>
<head>
<title>Responsive Interactive Canvas</title>
<script>
	  var canvas;
	  var context;
	  var circles = [];
	  var timer;
	  var particles;
 var timer;
 var timerRestart;
 function makeParticles() {
	//create an array of particles for our animation
	particles = [];
	for(var i = 0; i < 30; i++)
	{
		particles.push(new Particle());
	}
 }
 function degreesToRadians(degrees) {
	 //converts from degrees to radians and returns
	 return (degrees * Math.PI)/180;
 }
 function Particle()
 {
	 //the constructor for a single particle, with random starting x+y, velocity, color, and radius
	 //this.x = Math.random()*canvas.width;
	 //this.y = Math.random()*canvas.height;
	 this.x = canvas.width/2;
	 this.y = canvas.height/2;
	 this.vx = Math.random()*10-5;
	 this.vy = Math.random()*10-5;
	 var colors = ["red", "green", "blue", "orange", "purple", "yellow", "white"];
	 this.color = colors[Math.floor(Math.random()*colors.length)];
	 this.radius = 30;
 }
 function moveParticles() {
	 //partially clear the screen to fade previous circles, and draw a new particle at each new coordinate
	 context.globalCompositeOperation = "source-over";
	 context.fillStyle = "rgba(0, 0, 0, 0.3)";
	 context.fillRect(0, 0, canvas.width, canvas.height);
	 context.globalCompositeOperation = "lighter";
	 for(var i = 0; i < particles.length; i++)
	 {
		 var p = particles[i];
		 context.beginPath();
		 context.arc(p.x, p.y, p.radius, 0, degreesToRadians(360), true);
		 context.fillStyle = p.color;
		 context.fill();
		 p.x += p.vx;
		 p.y += p.vy;
		 if(p.x < -50) p.x = canvas.width+50;
		 if(p.y < -50) p.y = canvas.height+50;
		 if(p.x > canvas.width+50) p.x = -50;
		 if(p.y > canvas.height+50) p.y = -50;
		 p.radius -= 1;
	 }
 }

 window.onload = function() {
 	 canvas = document.getElementById('canvas');
	 context = canvas.getContext('2d');
	 makeParticles();
	 timer = setInterval(moveParticles, 150);
	 timerRestart = setInterval(makeParticles, 3000);
 }
	  function Circle(x, y, color) {
		this.x = x;
		this.y = y;
		this.dx = Math.random()*4-2;
		this.dy = Math.random()*4-2;
		this.color = color;
	  }
      function init() {
        canvas = document.getElementById('canvas');
        context = canvas.getContext("2d");
 
        window.addEventListener('resize', resizeCanvas, false);
        window.addEventListener('orientationchange', resizeCanvas, false);
        resizeCanvas();
		canvas.onclick = function(event) {
			handleClick(event.clientX, event.clientY);
		};
		timer = setInterval(resizeCanvas, 20);
      }
	  function handleClick(x, y) {
	     var found = false;
		 for (var i=0; i<circles.length; i++) {
			d = Math.sqrt((circles[i].x - x)*(circles[i].x - x) + (circles[i].y - y)*(circles[i].y - y));
			if (d <= 30) {
				circles.splice(i, 1);
				found = true;
			}
		 }
		 fillBackgroundColor();
		 if (!found) {
			var colors = ["red", "green", "blue", "orange", "purple", "yellow"];
			var color = colors[Math.floor(Math.random()*colors.length)];
			circles.push(new Circle(x, y, color));
		}
		for (var i=0; i<circles.length; i++) {
			drawCircle(circles[i]);
		}
	  }
	  function drawCircle(circle) {
		 context.beginPath();
		 context.arc(circle.x, circle.y, 30, 0, degreesToRadians(360), true);
		 context.fillStyle = circle.color;
		 context.fill();
		 if (circle.x + circle.dx > canvas.width || circle.x + circle.dx < 0)
			circle.dx = -circle.dx;
		 if (circle.y + circle.dy > canvas.height || circle.y + circle.dy < 0)
			circle.dy = -circle.dy;
		 circle.x += circle.dx;
		 circle.y += circle.dy;
	  }
      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
		fillBackgroundColor();
		for (var i=0; i<circles.length; i++) {
			drawCircle(circles[i]);
		 }
      }
	  function fillBackgroundColor() {
		 var colors = ["white", "yellow", "blue", "red"];
		 var bgColor = colors[Math.floor(Math.random() * colors.length)];
		 context.fillStyle = 'black';
		 context.fillRect(0, 0, canvas.width, canvas.height);
	}
	function degreesToRadians(degrees) {
		//converts from degrees to radians and returns
		return (degrees * Math.PI)/180;
	}
	window.onload = init;
</script>
</head>
<body>
<canvas id='canvas' width=500 height=500></canvas>
</body>	  
</html>
